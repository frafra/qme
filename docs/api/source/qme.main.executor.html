

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>qme.main.executor package &mdash; QueueMe (qme) Python 11 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../assets/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../assets/documentation_options.js"></script>
        <script type="text/javascript" src="../assets/jquery.js"></script>
        <script type="text/javascript" src="../assets/underscore.js"></script>
        <script type="text/javascript" src="../assets/doctools.js"></script>
        <script type="text/javascript" src="../assets/language_data.js"></script>
    
    <script type="text/javascript" src="../assets/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../assets/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../assets/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="qme.utils package" href="qme.utils.html" />
    <link rel="prev" title="qme.main.database package" href="qme.main.database.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QueueMe (qme) Python
          

          
            
            <img src="../assets/logo-light-transparent-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="qme.html">qme package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="qme.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="qme.app.html">qme.app package</a></li>
<li class="toctree-l3"><a class="reference internal" href="qme.client.html">qme.client package</a></li>
<li class="toctree-l3"><a class="reference internal" href="qme.logger.html">qme.logger package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="qme.main.html">qme.main package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="qme.main.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="qme.main.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="qme.main.html#qme-main-gui-module">qme.main.gui module</a></li>
<li class="toctree-l4"><a class="reference internal" href="qme.main.html#module-qme.main">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="qme.utils.html">qme.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qme.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="qme.html#module-qme.defaults">qme.defaults module</a></li>
<li class="toctree-l2"><a class="reference internal" href="qme.html#module-qme.version">qme.version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="qme.html#module-qme">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">CHANGELOG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QueueMe (qme) Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="qme.html">qme package</a> &raquo;</li>
        
          <li><a href="qme.main.html">qme.main package</a> &raquo;</li>
        
      <li>qme.main.executor package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/qme.main.executor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qme-main-executor-package">
<h1>qme.main.executor package<a class="headerlink" href="#qme-main-executor-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-qme.main.executor.base">
<span id="qme-main-executor-base-module"></span><h2>qme.main.executor.base module<a class="headerlink" href="#module-qme.main.executor.base" title="Permalink to this headline">¶</a></h2>
<p>Copyright (C) 2020 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="class">
<dt id="qme.main.executor.base.Capturing">
<em class="property">class </em><code class="sig-prename descclassname">qme.main.executor.base.</code><code class="sig-name descname">Capturing</code><a class="reference internal" href="../modules/qme/main/executor/base.html#Capturing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.Capturing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>capture output from stdout and stderr into capture object.
This is based off of github.com/vsoch/gridtest but modified
to write files. The stderr and stdout are set to temporary files at
the init of the capture, and then they are closed when we exit. This
means expected usage looks like:</p>
<dl class="simple">
<dt>with Capturing() as capture:</dt><dd><p>process = subprocess.Popen(…)</p>
</dd>
</dl>
<p>And then the output and error are retrieved from reading the files:
and exposed as properties to the client:</p>
<blockquote>
<div><p>capture.out
capture.err</p>
</div></blockquote>
<p>And cleanup means deleting these files, if they exist.</p>
<dl class="method">
<dt id="qme.main.executor.base.Capturing.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#Capturing.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.Capturing.cleanup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.Capturing.err">
<em class="property">property </em><code class="sig-name descname">err</code><a class="headerlink" href="#qme.main.executor.base.Capturing.err" title="Permalink to this definition">¶</a></dt>
<dd><p>Return error stream. Returns empty string if empty or doesn’t exist.
Returns (str) : error stream written to file</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.Capturing.out">
<em class="property">property </em><code class="sig-name descname">out</code><a class="headerlink" href="#qme.main.executor.base.Capturing.out" title="Permalink to this definition">¶</a></dt>
<dd><p>Return output stream. Returns empty string if empty or doesn’t exist.
Returns (str) : output stream written to file</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.Capturing.set_stderr">
<code class="sig-name descname">set_stderr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#Capturing.set_stderr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.Capturing.set_stderr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.Capturing.set_stdout">
<code class="sig-name descname">set_stdout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#Capturing.set_stdout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.Capturing.set_stdout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="qme.main.executor.base.ExecutorBase">
<em class="property">class </em><code class="sig-prename descclassname">qme.main.executor.base.</code><code class="sig-name descname">ExecutorBase</code><span class="sig-paren">(</span><em class="sig-param">taskid</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#ExecutorBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.ExecutorBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A qme executor exists to translate a terminal command into a parsed
job (shown in the dashboard) and expose one or more actions for it.
The base executor will work for any generic command, generates
status based on return codes, and exposes basic options to cancel (kill)
or re-run.</p>
<dl class="method">
<dt id="qme.main.executor.base.ExecutorBase.command">
<em class="property">property </em><code class="sig-name descname">command</code><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.ExecutorBase.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param">cmd</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#ExecutorBase.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.ExecutorBase.export">
<code class="sig-name descname">export</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#ExecutorBase.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.export" title="Permalink to this definition">¶</a></dt>
<dd><p>return data as json. This is intended to save to the task database.
Any important output, returncode, etc. from the execute() function
should be provided here. Required strings are “command” and “status”
that must be one of “running” or “complete” or “cancelled.” Suggested
fields are output, error, and returncode. self._export_common() should
be called first.</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.ExecutorBase.get_error">
<code class="sig-name descname">get_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#ExecutorBase.get_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.get_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.ExecutorBase.get_output">
<code class="sig-name descname">get_output</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#ExecutorBase.get_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.get_output" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="qme.main.executor.base.ExecutorBase.name">
<code class="sig-name descname">name</code><em class="property"> = 'base'</em><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.base.ExecutorBase.summary">
<code class="sig-name descname">summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/base.html#ExecutorBase.summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.base.ExecutorBase.summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-qme.main.executor.shell">
<span id="qme-main-executor-shell-module"></span><h2>qme.main.executor.shell module<a class="headerlink" href="#module-qme.main.executor.shell" title="Permalink to this headline">¶</a></h2>
<p>Copyright (C) 2020 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="class">
<dt id="qme.main.executor.shell.ShellExecutor">
<em class="property">class </em><code class="sig-prename descclassname">qme.main.executor.shell.</code><code class="sig-name descname">ShellExecutor</code><span class="sig-paren">(</span><em class="sig-param">taskid=None</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#qme.main.executor.base.ExecutorBase" title="qme.main.executor.base.ExecutorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">qme.main.executor.base.ExecutorBase</span></code></a></p>
<p>A shell executor is the most basic of executors to run some shell command.
We use the default functions provided by the BaseExecutor class to store
the command, run, get the return code, and retry.</p>
<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.command">
<em class="property">property </em><code class="sig-name descname">command</code><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.decode">
<code class="sig-name descname">decode</code><span class="sig-paren">(</span><em class="sig-param">line</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a line of output (error or regular) decode using the
system default, if appropriate</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param">cmd</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a system command and return output and error. Execute
should take a cmd (a string or list) and execute it according to
the executor. Attributes should be set on the class that are
added to self.export. Since the functions here are likely needed
by most executors, we create a self._execute() class that is called
instead, and can be used by the other executors.</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.export">
<code class="sig-name descname">export</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.export" title="Permalink to this definition">¶</a></dt>
<dd><p>return data as json. This is intended to save to the task database.
Any important output, returncode, etc. from the execute() function
should be provided here. Required strings are “command” and “status”
that must be one of “running” or “complete” or “cancelled.” Suggested
fields are output, error, and returncode. self._export_common() should
be called first.</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.get_error">
<code class="sig-name descname">get_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.get_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.get_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the error from shell command
:rtype: str</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.get_output">
<code class="sig-name descname">get_output</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.get_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.get_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the output from shell command
:rtype: str</p>
</dd></dl>

<dl class="attribute">
<dt id="qme.main.executor.shell.ShellExecutor.name">
<code class="sig-name descname">name</code><em class="property"> = 'shell'</em><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>refresh output and error streams</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.set_command">
<code class="sig-name descname">set_command</code><span class="sig-paren">(</span><em class="sig-param">cmd</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.set_command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.set_command" title="Permalink to this definition">¶</a></dt>
<dd><p>parse is called when a new command is provided to ensure we have
a list. We don’t check that the executable is on the path,
as the initialization might not occur in the runtime environment.</p>
</dd></dl>

<dl class="method">
<dt id="qme.main.executor.shell.ShellExecutor.summary">
<code class="sig-name descname">summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor/shell.html#ShellExecutor.summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.shell.ShellExecutor.summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-qme.main.executor">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-qme.main.executor" title="Permalink to this headline">¶</a></h2>
<p>Copyright (C) 2020 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="function">
<dt id="qme.main.executor.get_executor">
<code class="sig-prename descclassname">qme.main.executor.</code><code class="sig-name descname">get_executor</code><span class="sig-paren">(</span><em class="sig-param">command=None</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor.html#get_executor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.get_executor" title="Permalink to this definition">¶</a></dt>
<dd><p>get executor will return the correct executor depending on a command (or
other string) matching a regular expression. Currently we just have a
ShellExecutor.</p>
</dd></dl>

<dl class="function">
<dt id="qme.main.executor.get_named_executor">
<code class="sig-prename descclassname">qme.main.executor.</code><code class="sig-name descname">get_named_executor</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">taskid=None</em><span class="sig-paren">)</span><a class="reference internal" href="../modules/qme/main/executor.html#get_named_executor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qme.main.executor.get_named_executor" title="Permalink to this definition">¶</a></dt>
<dd><p>get a named executor, meaning determining based on name and not command</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="qme.utils.html" class="btn btn-neutral float-right" title="qme.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="qme.main.database.html" class="btn btn-neutral float-left" title="qme.main.database package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Vanessa Sochat

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>